{"ast":null,"code":"var _jsxFileName = \"/home/jessica/Desktop/BRAINSTATION/brainFlix-JessicaShin/brainFlix-JessicaShin/sprint-3/Client/src/pages/Main/Main.js\";\nimport React from 'react';\nimport './Main.scss';\nimport axios from 'axios';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'; // import each components\n\nimport VideoPlaying from '../../components/VideoPlaying/VideoPlaying';\nimport Description from '../../components/Description/Description';\nimport Form from '../../components/Form/Form';\nimport Comment from '../../components/Comments/Comment';\nimport VideoSide from '../../components/VideoSide/VideoSide'; // MAIN VIDEO SECTION\n// const api = 'https://project-2-api.herokuapp.com/videos';\n// const key = '?api_key=ae8e8f77-8ae3-41ea-9efd-04a70d523diw';\n// const mainURL = '/1af0jruup5gu';\n\nconst api = 'http://localhost:8080/video';\nconst mainURL = '/1af0jruup5gu';\n\nclass Main extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      videoData: [],\n      selectedVideo: {\n        comments: []\n      },\n      clickCounter: 0\n    };\n\n    this.submitHandle = event => {\n      event.preventDefault();\n      let sideUrl = this.props.match.params.url;\n\n      if (typeof sideUrl === \"undefined\") {\n        sideUrl = '1af0jruup5gu';\n      }\n\n      if (!event.target.comment.value) {\n        alert('Please type comment');\n      } else {\n        axios.post(`${api}/${sideUrl}/comments${key}`, {\n          \"comment\": event.target.comment.value,\n          \"name\": \"USER_NAME\"\n        }).then(() => {\n          this.componentDidMount();\n        });\n        event.target.reset();\n      }\n    };\n\n    this.likesHandle = event => {\n      event.preventDefault();\n      let sideUrl = this.props.match.params.id;\n\n      if (typeof sideUrl === \"undefined\") {\n        sideUrl = '1af0jruup5gu';\n      }\n\n      axios.post(`${api}/${sideUrl}/comments/${this.props.match.params.comments}${key}`).then(this.setState({\n        clickCounter: ++this.state.clickCounter\n      }));\n    };\n\n    this.deleteHandle = event => {\n      event.preventDefault();\n      let sideUrl = this.props.match.params.id;\n\n      if (typeof sideUrl === \"undefined\") {\n        sideUrl = '1af0jruup5gu';\n      }\n\n      axios.delete(`${api}/${sideUrl}/comments/:comments_id${key}`);\n    };\n  }\n\n  // function for re-using axios\n  getfromAPI(urlId) {\n    axios.get(api + urlId + key).then(response => {\n      this.setState({\n        selectedVideo: response.data\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    this.getfromAPI(mainURL);\n    axios.get(api + key).then(response => {\n      this.setState({\n        videoData: response.data\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const matchUrl = this.props.match.url;\n    const prevUrl = prevProps.match.url;\n\n    if (matchUrl !== prevUrl && matchUrl === '/') {\n      this.getfromAPI(mainURL);\n    } else if (matchUrl !== prevUrl) {\n      this.getfromAPI(`/${this.props.match.params.id}`);\n    }\n  } // onSubmit button for posting comments\n  // could not figure out how to change each url for the side videos\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(VideoPlaying, Object.assign({}, this.state.selectedVideo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main--flexbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main--left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Description, Object.assign({}, this.state.selectedVideo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Form, {\n      comments: this.state.selectedVideo,\n      submitHandle: this.submitHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Comment, {\n      displayComment: this.state.selectedVideo,\n      likesHandle: this.likesHandle,\n      deleteHandle: this.deleteHandle,\n      likes: this.state.clickCounter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main--right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(VideoSide, {\n      videoList: this.state.videoData.filter(content => content.id !== this.state.selectedVideo.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\n;\nexport default Main;","map":{"version":3,"sources":["/home/jessica/Desktop/BRAINSTATION/brainFlix-JessicaShin/brainFlix-JessicaShin/sprint-3/Client/src/pages/Main/Main.js"],"names":["React","axios","BrowserRouter","Route","Switch","VideoPlaying","Description","Form","Comment","VideoSide","api","mainURL","Main","Component","state","videoData","selectedVideo","comments","clickCounter","submitHandle","event","preventDefault","sideUrl","props","match","params","url","target","comment","value","alert","post","key","then","componentDidMount","reset","likesHandle","id","setState","deleteHandle","delete","getfromAPI","urlId","get","response","data","catch","error","console","log","componentDidUpdate","prevProps","matchUrl","prevUrl","render","filter","content"],"mappings":"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","sourcesContent":["import React from 'react';\nimport'./Main.scss';\nimport axios from 'axios';\nimport { BrowserRouter, Route, Switch} from 'react-router-dom';\n\n\n// import each components\n\nimport VideoPlaying from '../../components/VideoPlaying/VideoPlaying'\nimport Description from '../../components/Description/Description';\nimport Form from '../../components/Form/Form';\nimport Comment from '../../components/Comments/Comment';\nimport VideoSide from '../../components/VideoSide/VideoSide';\n\n\n// MAIN VIDEO SECTION\n\n// const api = 'https://project-2-api.herokuapp.com/videos';\n// const key = '?api_key=ae8e8f77-8ae3-41ea-9efd-04a70d523diw';\n\n// const mainURL = '/1af0jruup5gu';\n\nconst api = 'http://localhost:8080/video';\n\nconst mainURL = '/1af0jruup5gu';\n\n\nclass Main extends React.Component {\n    \n    state ={\n        videoData: [],\n        selectedVideo: {\n            comments: []\n        },\n        clickCounter: 0\n    }\n\n    // function for re-using axios\n    getfromAPI ( urlId ) {\n        axios\n            .get(api + urlId + key)\n            .then(response => {\n                this.setState({\n                    selectedVideo: response.data\n                })\n            })\n            .catch(error => {\n                console.log(error);\n            })\n    }\n\n    componentDidMount() {\n        this.getfromAPI(mainURL);\n        axios\n            .get(api+key)\n            .then(response => {\n                this.setState({\n                    videoData: response.data\n                })\n            })\n    }\n\n    componentDidUpdate(prevProps) {\n        const matchUrl = this.props.match.url;\n        const prevUrl = prevProps.match.url;\n\n        if (matchUrl !== prevUrl && matchUrl === '/') {\n\n            this.getfromAPI(mainURL)\n\n        } else if (matchUrl !== prevUrl) {\n\n            this.getfromAPI(`/${this.props.match.params.id}`)\n            \n        }\n    }\n\n    // onSubmit button for posting comments\n    // could not figure out how to change each url for the side videos\n\n    submitHandle = (event) => {\n        event.preventDefault();\n\n        let sideUrl = this.props.match.params.url;\n\n        if (typeof sideUrl === \"undefined\") {\n            sideUrl = '1af0jruup5gu'\n        }\n\n        if (!event.target.comment.value) {\n\n            alert ('Please type comment');\n        \n        } else {\n            axios\n                .post(`${api}/${sideUrl}/comments${key}`, {\n                    \"comment\" : event.target.comment.value,\n                    \"name\" : \"USER_NAME\"\n                })\n                .then(() => {\n                    this.componentDidMount();\n              \n                })\n                event.target.reset();                \n        }\n    }\n\n    // Could not figure out how to put each commentId in .post/.delete :(\n\n    likesHandle = (event) => {\n        event.preventDefault();\n\n        let sideUrl = this.props.match.params.id;\n\n        if (typeof sideUrl === \"undefined\") {\n            sideUrl = '1af0jruup5gu'\n        }\n        axios\n            .post(`${api}/${sideUrl}/comments/${this.props.match.params.comments}${key}`)\n            .then(\n                this.setState({\n                    clickCounter: ++this.state.clickCounter\n                })\n            )        \n    }\n\n    deleteHandle = (event) => {\n        event.preventDefault();\n\n        let sideUrl = this.props.match.params.id;\n\n        if (typeof sideUrl === \"undefined\") {\n            sideUrl = '1af0jruup5gu'\n        }\n        \n        axios\n            .delete(`${api}/${sideUrl}/comments/:comments_id${key}`)\n    }\n\n\n    render () {\n\n        return (\n            <React.Fragment>\n                \n                <main className=\"main\">\n\n                    <VideoPlaying \n                        {...this.state.selectedVideo}\n                    />\n\n                    <div className=\"main--flexbox\">\n                        \n                        <div className=\"main--left\">\n                            <Description \n                                {...this.state.selectedVideo}\n                            />\n            \n                            <Form \n                                comments={this.state.selectedVideo}\n                                submitHandle={this.submitHandle}\n                            />\n\n                            <Comment \n                                displayComment={this.state.selectedVideo}\n                                likesHandle={this.likesHandle}\n                                deleteHandle={this.deleteHandle}\n                                likes={this.state.clickCounter}\n                            />\n            \n                        </div>\n        \n                        <div className=\"main--right\">\n                            <VideoSide \n                                videoList={this.state.videoData.filter(content => content.id !== this.state.selectedVideo.id)}\n                            /> \n                        </div>\n                    </div>\n\n                </main>\n\n            </React.Fragment>\n        )\n    };\n};\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}